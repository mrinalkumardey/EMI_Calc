<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Your Easy EMI Calculator | Mrinal Kumar Dey</title>
  <link rel="stylesheet" href="style.css" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.28/jspdf.plugin.autotable.min.js"></script>
</head>
<body>
  <div class="container">
    <h1>Your Easy EMI Calculator</h1>
    <p class="tagline">
      Actual EMI and Amortization Schedule may be different depending upon Organization's internal policies
    </p>

    <!-- Tab Buttons -->
    <div class="tabs">
      <button class="tab-btn active" onclick="openTab(1)">1. EMI Calculation</button>
      <button class="tab-btn" onclick="openTab(2)">2. Processing Fees & Tax</button>
      <button class="tab-btn" onclick="openTab(3)">3. Amortization Schedule</button>
    </div>

    <!-- Tab 1: EMI Calculation -->
    <div id="tab1" class="tab-content" style="display: block;">
      <div class="grid">
        <div class="input-group">
          <label>Loan Amount (₹)</label>
          <input type="number" id="principal" placeholder="e.g. 100000" />
        </div>
        <div class="input-group">
          <label>Interest Rate (% per year)</label>
          <input type="number" step="0.01" id="rate" placeholder="e.g. 8.5" />
        </div>
        <div class="input-group">
          <label>Loan Tenure (in Months)</label>
          <input type="number" id="months" placeholder="e.g. 60" min="1" />
        </div>
        <div class="input-group">
          <label>Disbursement Date</label>
          <input type="date" id="startDate" />
        </div>
        <div class="input-group">
          <label>Preferred EMI Day</label>
          <select id="deductionDay">
            <option value="3">3rd of Month</option>
            <option value="10">10th of Month</option>
          </select>
        </div>
      </div>
      <button onclick="calculateAll()">Calculate EMI</button>

      <div class="summary-grid" id="emiSummary" style="display:none; margin-top:20px;">
        <div><strong>Monthly EMI</strong><span id="emi">₹0</span></div>
        <div><strong>Total Payable</strong><span id="total">₹0</span></div>
        <div><strong>Total Interest</strong><span id="interest">₹0</span></div>
      </div>
    </div>

    <!-- Tab 2: Processing Fees & Tax -->
    <div id="tab2" class="tab-content" style="display: none;">
      <div class="grid">
        <div class="input-group">
          <label>Processing Fee (% of Loan)</label>
          <input type="number" step="0.01" id="procFeeRate" value="1.25" />
        </div>
        <div class="input-group">
          <label>GST on Processing Fee (%)</label>
          <input type="number" step="0.01" id="gstRate" value="18" />
        </div>
      </div>
      <div class="result-box" id="feeResults" style="display:none; margin-top:20px;">
        <p><strong>Processing Fee:</strong> <span id="procFee">₹0</span></p>
        <p><strong>GST Amount:</strong> <span id="gst">₹0</span></p>
        <p><strong>Total Upfront Cost:</strong> <span id="totalUpfront">₹0</span></p>
      </div>
    </div>

    <!-- Tab 3: Amortization Schedule -->
    <div id="tab3" class="tab-content" style="display: none;">
      <canvas id="pieChart" style="margin: 20px 0; max-height: 300px;"></canvas>
      <div class="table-wrapper">
        <table id="amortTable">
          <thead>
            <tr>
              <th>Month</th>
              <th>EMI Date</th>
              <th>EMI (₹)</th>
              <th>Principal (₹)</th>
              <th>Interest (₹)</th>
              <th>Balance (₹)</th>
            </tr>
          </thead>
          <tbody id="amortBody"></tbody>
        </table>
      </div>
      <button onclick="exportToPDF()" class="secondary" id="pdfBtn" style="display:none; margin-top:15px;">
        Export Schedule as PDF
      </button>
    </div>

    <footer>
      Made with ❤️ by 
      <a href="https://linkedin.com/in/mrinal-kumar-dey" target="_blank">Mrinal Kumar Dey</a>
    </footer>
  </div>

  <script src="script.js"></script>
</body>
</html>